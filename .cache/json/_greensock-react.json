{"data":{"site":{"siteMetadata":{"title":"Maggie Appleton","description":"Maggie Appleton is an art director and anthropological designer. This is her digital garden for growing visual explanations about technology, culture, and programming","author":{"name":"Maggie Appleton"},"keywords":["Illustration, Tech"]}},"brainNote":{"slug":"greensock-react","title":"GreenSock Animations with React Hooks","childMdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"GreenSock Animations with React Hooks\",\n  \"slug\": \"greensock-react\",\n  \"updated\": \"2020-09-27T00:00:00.000Z\",\n  \"published\": true,\n  \"type\": [\"note\"],\n  \"topics\": [\"React\", \"Scrollytelling\", \"Design\", \"JavaScript\", \"Web Development\", \"Greensock\"],\n  \"growthStage\": \"Budding\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar IntroParagraph = makeShortcode(\"IntroParagraph\");\nvar Footnote = makeShortcode(\"Footnote\");\nvar FullWidthImage = makeShortcode(\"FullWidthImage\");\nvar SimpleCard = makeShortcode(\"SimpleCard\");\nvar Center = makeShortcode(\"Center\");\nvar Tween = makeShortcode(\"Tween\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(IntroParagraph, {\n    mdxType: \"IntroParagraph\"\n  }, mdx(\"p\", null, \"Using the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://greensock.com/\"\n  }), \"GreenSock\"), \" web animation library (also known as gsap) in vanilla JavaScript isn't too complex. But when we want it to play nicely with a frontend framework like React, we run into some finicky issues.\")), mdx(\"p\", null, \"This guide is specifically about using React Hooks with GreenSock, as many of the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://greensock.com/react/\"\n  }), \"existing guides\"), \" only explain how to set it up with the old style of class components.\"), mdx(\"p\", null, \"This isn't an introduction to the GreenSock library itself \\u2013 head over to my post on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/greensock-essentials\"\n  }), \"The Bare Essentials of Greensock\"), \" for that.\"), mdx(\"br\", null), mdx(\"h2\", null, \"React, Meet GreenSock\"), mdx(\"p\", null, \"The issue with combining these two libraries is that React acts as a DOM interloper \\u2013 it sits between the code we write and the DOM, managing it for us.\"), mdx(\"p\", null, \"React builds it's own internal \\\"tree\\\" of DOM nodes based off our code, and only updates the actual DOM as needed (a concept previously known as the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/react-vdom\"\n  }), \"React Virtual DOM\"), \") \", mdx(Footnote, {\n    idName: 1,\n    mdxType: \"Footnote\"\n  }, \"The React team has gone off the term of the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"virtual DOM\"), \" and prefer to talk about the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"render tree\"), \". Potatoes, potataos. For more on how the virtual DOM works, I have an \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/react-vdom\"\n  }), \"illustrated guide\"))), mdx(FullWidthImage, {\n    alt: \"A diagram of React generating all the DOM nodes for us\",\n    src: \"https://res.cloudinary.com/dg3gyk0gu/image/upload/c_scale,f_auto,q_100,w_1400/v1600973172/maggieappleton.com/notes/gsap/react-greensock-2.png\",\n    mdxType: \"FullWidthImage\"\n  }), mdx(\"p\", null, \"Meanwhile, the GreenSock library usually works by directly animating our DOM elements. Perhaps you can sense the tension in the room...\"), mdx(\"p\", null, \"Since the GreenSock library needs access to the DOM  in order to animate it, we need to tell React about our Greensock animations. Otherwise the two end up in awkward arguments that can end in tears (primarily mine).\"), mdx(\"br\", null), mdx(\"h2\", null, \"Bring in the React Hooks\"), mdx(\"p\", null, \"There's two essential React hooks we'll use to connect our React code to our  Greensock code: \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"useRef\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"useEffect\")), mdx(\"br\", null), mdx(SimpleCard, {\n    width: \"740px\",\n    mdxType: \"SimpleCard\"\n  }, mdx(\"h4\", null, mdx(\"strong\", {\n    parentName: \"h4\"\n  }, \"useRef\"), \" lets us access and directly target our DOM nodes\")), mdx(SimpleCard, {\n    width: \"740px\",\n    mdxType: \"SimpleCard\"\n  }, mdx(\"h4\", null, mdx(\"strong\", {\n    parentName: \"h4\"\n  }, \"useEffect\"), \" lets us to perform side effects \\u2013 any functions or data requests that we want to run \", mdx(\"em\", {\n    parentName: \"h4\"\n  }, \"after\"), \" rendering the component to the DOM\")), mdx(\"p\", null, \"If you're not completely comfortable with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.freecodecamp.org/news/beginners-guide-to-using-react-hooks/\"\n  }), \"React Hooks\"), \" yet and those technical explanations mean nothing to you, don't worry we're going to slowly walk through this.  With illustrations. Because  who the fork properly understands \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\\"side effects\\\"\"), \"?\"), mdx(\"hr\", null), mdx(\"h3\", null, \"Getting Setup\"), mdx(\"p\", null, \"We first need to run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"yarn install gsap\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm install gsap\"), \" into our React project repo \", mdx(Footnote, {\n    idName: 2,\n    mdxType: \"Footnote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"gsap\"), \" is short for \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"GreenSock Animation Platform\"), \" and it's the way we reference the Greensock library in all our code sytax\")), mdx(\"br\", null), mdx(SimpleCard, {\n    width: \"740px\",\n    center: true,\n    mdxType: \"SimpleCard\"\n  }, mdx(\"p\", null, \"Feel free to open up a Codesandbox project to work through the steps while you read. I've set one up for you with React and Greensock already installed:\"), mdx(\"p\", null, mdx(\"a\", {\n    noTip: true,\n    href: \"https://codesandbox.io/s/reacthooks-greensock-demo-xjoti?file=/src/AnimatedBox.js\"\n  }, mdx(\"button\", {\n    style: {\n      marginTop: '0.2em'\n    }\n  }, \"Jump into CodeSandbox\"), \" \"))), mdx(\"br\", null), mdx(\"h3\", null, \"Building our Animation Component\"), mdx(\"p\", null, \"Let's start by creating a React component called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<AnimatedBox/>\"), \" that is going to hold all our Greensock code. We're going to build a simple  \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<div>\"), \"  element and have it animate across the page (exciting!).\"), mdx(\"p\", null, \"We'll need to import the Greensock library into our component with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"import { gsap }from 'gsap'\"), \", as well as React and our two hooks with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"import React, { useRef, useEffect } from 'react'\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"import React, { useRef, useEffect } from 'react'\\nimport { gsap }from 'gsap'\\n\\nconst Animation = () => {\\n    return (\\n        <div style={{\\n            width: '160px',\\n            height: '160px',\\n            background: 'salmon'\\n        }} />\\n    )\\n}\\n\\n\")), mdx(\"p\", null, \"I've set some basic width, height, and colour CSS styles on our div to make it visible on the page.\"), mdx(\"div\", {\n    style: {\n      margin: '2em auto',\n      width: '160px',\n      height: '160px',\n      background: 'salmon',\n      borderRadius: '4px'\n    }\n  }), mdx(Center, {\n    mdxType: \"Center\"\n  }, mdx(\"p\", null, \"Good looking div, right?\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"Salmon is always the right colour choice.\")), mdx(\"hr\", null), mdx(\"h2\", null, \"Adding the useRef Hook\"), mdx(\"p\", null, \"We're now going to add \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"references\"), \" to our animation with the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"useRef\"), \" hook.\"), mdx(\"p\", null, \"We create a new reference by adding \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"const boxRef = useRef()\"), \" anywhere outside of our return statement. Call it anything you like, but \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"boxRef\"), \" is a good enough name for this example.\"), mdx(\"p\", null, \"We then add a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ref={boxRef}\"), \" attribute on our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<div>\"), \" element.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const Animation = () => {\\n    const boxRef = useRef()\\n\\n    return (\\n        <div ref={boxRef} style={{\\n            width: '160px',\\n            height: '160px',\\n            background: 'salmon'\\n        }} />\\n    )\\n}\\n\")), mdx(\"p\", null, \"This tells React we want to be able to control our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<div>\"), \" element with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"boxRef\"), \" reference once our component is mounted onto the DOM.\"), mdx(\"hr\", null), mdx(\"h2\", null, \"Adding the useEffect Hook\"), mdx(\"p\", null, \"Next we're going to add our \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \" hook, and write our GreenSock animation inside of it.\"), mdx(\"p\", null, \"If you're already familiar with greensock this will look fairly straightforward.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const Animation = () => {\\n    const boxRef = useRef()\\n\\n    useEffect(() => {\\n        gsap.to([boxRef.current], {\\n            x: '400px',\\n            duration: 2\\n        })\\n    })\\n\\n    return (\\n        <div ref={boxRef} style={{\\n            width: '160px',\\n            height: '160px',\\n            background: 'salmon'\\n        }} />\\n    )\\n}\\n\")), mdx(\"p\", null, \" We declare a normal \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gsap.to()\"), \" tween, but instead of passing in an id or class name as the target element, we use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[boxRef.current]\"), \". \"), mdx(\"p\", null, \" This means we want gsap to animate the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".current\"), \" property of our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"boxRef\"), \" reference \\u2013 which is the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<div>\"), \" element we put that reference on. \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"gsap.to([boxRef.current], {\\n\\n})\\n\")), mdx(\"p\", null, \" We then pass in our variables object, which tells Greensock to move our div 400px along the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"x\"), \" axis over a duration of 2 seconds:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"{ x: 400px, duration: 2 }\\n\")), mdx(\"p\", null, \"And thus, our div animates...\"), mdx(\"p\", null, mdx(Tween, {\n    to: {\n      scrollTrigger: {\n        trigger: '#boxRef',\n        start: 'top 60%',\n        end: '+=500',\n        scrub: true\n      },\n      x: '400px'\n    },\n    duration: 2,\n    ease: \"back.out(1.3)\",\n    mdxType: \"Tween\"\n  }, mdx(\"div\", {\n    id: \"boxRef\",\n    style: {\n      margin: '2em',\n      width: '160px',\n      height: '160px',\n      background: 'salmon',\n      borderRadius: '4px'\n    }\n  }))), mdx(Center, {\n    mdxType: \"Center\"\n  }, mdx(\"h1\", null, \"Tada \", mdx(\"span\", null, \"\\uD83C\\uDF89\"))), mdx(\"p\", null, \"So by this point, you hopefully have a working animation in that \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://codesandbox.io/s/reacthooks-greensock-demo-xjoti?file=/src/AnimatedBox.js\"\n  }), \"Codesandbox project\"), \" or a local repo.\"), mdx(\"hr\", null), mdx(\"p\", null, \"If you don't feel like mucking around with \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"useRef\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \", \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://johnlindquist.com/use-greensock-with-react-hooks/\"\n  }), \"John Lindquist\"), \" created a simple React hook called \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"use-gsap\"), \" that hides them away.\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"GreenSock Animations with React Hooks","updated":"Sep 27, 2020","startDate":null,"slug":"greensock-react","topics":["React","Scrollytelling","Design","JavaScript","Web Development","Greensock"],"growthStage":"Budding"}},"inboundReferenceNotes":[],"outboundReferenceNotes":[{"title":"The Bare Essentials of Greensock","slug":"greensock-essentials","childMdx":{"excerpt":"When it comes to web animation libraries,   Greensock  is the Rolls Royce of options. It's what powers most of those ridiculously fancy  Awwwards  websites. It's usually safe to assume powerful === complex. But once I started digging in I realised the core of the library was…"}},{"title":"What the Fork is the React Virtual DOM","slug":"react-vdom","childMdx":{"excerpt":"When I was first  learning React  I couldn't quite wrap my head around why it was any different to JavaScript. The idea of the virtual DOM system helped clarify a few things for me. Primarily it got me to understand the DOM, the virtual DOM, and your React app are all separate…"}}]}},"pageContext":{"slug":"greensock-react"}}